<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CalvoGames</title>
    
    <meta name="description" content="CalvoGames es una web de juegos indie y proyectos en desarrollo con descargas directas y próximos lanzamientos.">
    <link rel="icon" href="./favicon.ico" type="image/x-icon">
    <meta property="og:title" content="CalvoGames">
    <meta property="og:description" content="Juegos indie en desarrollo con descarga directa y próximos lanzamientos.">
    <meta property="og:image" content="/preview.png">
    <meta property="og:url" content="https://calvogames.pages.dev">
    <meta property="og:type" content="website">

    <style>
        .btn-owner-cg { background: #4caf50; color: white; padding: 5px 10px; border-radius: 4px; font-weight: bold; }
        .btn-admin-cg { background: #f44336; color: white; padding: 5px 10px; border-radius: 4px; font-weight: bold; }
        .btn-sesion-cg { cursor: pointer; font-size: 0.9em; }
        #user-avatar { width: 35px; height: 35px; border-radius: 50%; display: inline-flex; align-items: center; justify-content: center; color: white; margin-right: 8px; }
    </style>
</head>
<body>

    <div id="cg-auth-container" style="display: flex; align-items: center; padding: 10px; background: #222; color: white;">
        <div id="user-avatar">?</div>
        <div>
            <span id="cg-user-name">Invitado</span>
            <div id="session-action">
                <a href="login/" style="color: #aaa; text-decoration: none;">Iniciar Sesión</a>
            </div>
        </div>
        <button id="panel-btn" style="display: none; margin-left: 15px; border: none; cursor: pointer;"></button>
    </div>

    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-firestore-compat.js"></script>

    <script>
        // Tu lógica de autenticación original integrada
        const OWNER_EMAIL = "calvoonyt@gmail.com"; 

        // Inicializa aquí tu Firebase con tus credenciales
        // firebase.initializeApp(firebaseConfig);

        const cgAuth = firebase.auth();
        const cgDb = firebase.firestore();

        cgAuth.onAuthStateChanged((user) => {
            const nombre = document.getElementById('cg-user-name');
            const letra = document.getElementById('user-avatar');
            const container = document.getElementById('session-action');
            const panelBtn = document.getElementById('panel-btn');

            if (user) {
                nombre.innerText = user.displayName || "Usuario";
                letra.innerText = (user.displayName || "U").charAt(0).toUpperCase();
                letra.style.background = "#ff9800";
                
                container.innerHTML = '<span class="btn-sesion-cg" id="cg-logout" style="color:#aaa">Cerrar Sesión</span>';
                
                document.getElementById('cg-logout').onclick = () => cgAuth.signOut().then(() => location.reload());

                // Lógica de rangos (Owner/Admin)
                if (user.email === OWNER_EMAIL) {
                    panelBtn.style.display = "block";
                    panelBtn.className = "btn-owner-cg"; 
                    panelBtn.innerText = "⭐ OWNER PANEL";
                } else {
                    cgDb.collection("users").doc(user.uid).get().then((doc) => {
                        if (doc.exists && doc.data().rol === "admin") {
                            panelBtn.style.display = "block";
                            panelBtn.className = "btn-admin-cg";
                            panelBtn.innerText = "⚙️ ADMIN PANEL";
                        }
                    });
                }
            } else {
                letra.innerText = "?";
                letra.style.background = "#555";
                nombre.innerText = "Invitado";
                panelBtn.style.display = "none";
                container.innerHTML = '<a href="login/" style="color:#aaa; text-decoration:none;">Iniciar Sesión</a>';
            }
        });
    </script>

    <script src="./Calvo Games_files/main-64a32274863b6c59.js.descarga" defer=""></script>
</body>
</html>